# A0139938L
###### /java/seedu/task/commons/core/EventsCenter.java
``` java
    public EventsCenter unregisterHandler(Object handler) {
        eventBus.unregister(handler);
        return this;
    }
```
###### /java/seedu/task/commons/events/storage/DataSavingExceptionEvent.java
``` java
/**
 * Indicates an exception during a file saving
 */
public class DataSavingExceptionEvent extends BaseEvent {

    public Exception exception;
    private String message;

    public DataSavingExceptionEvent(Exception exception) {
        this.exception = exception;
    }

    public DataSavingExceptionEvent(String string) {
        this.message = string;
    }

    @Override
    public String toString() {
        if (message != null) {
            return message;
        } else {
            return exception.getMessage();
        }
    }

}
```
###### /java/seedu/task/logic/commands/Command.java
``` java
    /**
     * Registers the object as an event handler at the {@link EventsCenter}
     * @param handler usually {@code this}
     */
    protected void registerAsAnEventHandler(Object handler) {
        EventsCenter.getInstance().registerHandler(handler);
    }

    /**
     * Unregisters the object as an event handler at the {@link EventsCenter}
     * @param handler usually {@code this}
     */
    protected void unregisterAsAnEventHandler(Object handler) {
        EventsCenter.getInstance().unregisterHandler(handler);
    }

    /**
     * Writes message to chatbox as Suru
     * @param message
     */
    public void writeToChat(String message) {
        raise(new NewResultAvailableEvent(message));
    }
    /**
     * Raises the event via {@link EventsCenter#post(BaseEvent)}
     * @param event
     */
    protected void raise(BaseEvent event) {
        EventsCenter.getInstance().post(event);
    }

```
###### /java/seedu/task/logic/commands/LoadFromCommand.java
``` java

public class LoadFromCommand extends Command {

    public static final String MESSAGE_SUCCESS = "Load location has been changed.";
    private static final String MESSAGE_FAILURE = "There was a problem changing your load location";
    private static final String MESSAGE_ATTEMPT = "Attempting to load file...";

    private String filepath = "";
```
###### /java/seedu/task/logic/commands/LoadFromCommand.java
``` java
    @Override
    public CommandResult execute() {
        model.changeLoadFromLocation(filepath);
        return null;
    }

    /**
     * @return the filepath
     */
    public String getFilepath() {
        return filepath;
    }
    /**
     * @param filepath the filepath to set
     */
    public void setFilepath(String filepath) {
        this.filepath = filepath;
    }

```
###### /java/seedu/task/logic/commands/SaveToCommand.java
``` java

public class SaveToCommand extends Command {

```
###### /java/seedu/task/logic/commands/SaveToCommand.java
``` java
    public static final String MESSAGE_USAGE = DEFACTO_COMMAND + ": Defines a new save location for your tasks "
            + "Parameters: FILE_PATH"
            + "Example: " + DEFACTO_COMMAND
            + " ./taskmanager.xml";

    public static final String MESSAGE_SUCCESS = "Save location has been changed.";
    private static final String MESSAGE_FAILURE = "There was a problem changing your save location";
    private static final String MESSAGE_INVALID_FILE = "Please specify a file name ending in .xml";
    private static final String MESSAGE_ATTEMPT = "Attempting to save file...";
    private static final String VALID_FILE_REGEX = ".+[\\w,\\s,\\d]+\\.xml$";
    private static final Pattern ARGUMENTS_FORMAT = Pattern.compile(VALID_FILE_REGEX);


    private String filepath = "";

```
###### /java/seedu/task/logic/commands/SaveToCommand.java
``` java
    public SaveToCommand(String filepath) {
        this();
        this.setFilepath(filepath);
        registerAsAnEventHandler(this);
    }

    /**
     * Executes the command asynchronously
     * */
    public void executeAsync() {
        ReadOnlyTaskManager taskManager = model.getTaskManager();
        if (isFilePathValid(filepath)) {
            model.changeSaveToLocation(taskManager, filepath);
        } else {
            writeToChat(MESSAGE_INVALID_FILE);
        }
    }

    /**
     * Checks if file path is a valid xml file.
     * @param filepath
     * @return
     */
    private boolean isFilePathValid(String filepath) {
//        try{
//            Matcher matcher = ARGUMENTS_FORMAT.matcher(filepath);
//            String matched = matcher.matc;
//            return true;
//        }catch(IllegalStateException ise){
//            return false;
//        }
        Matcher matcher = ARGUMENTS_FORMAT.matcher(filepath);
        return matcher.matches();
    }

    @Override
    public CommandResult execute() throws CommandException {
        executeAsync();
        return null;
    }

    /**
     *
     * @param dsee
     * @return Command result indicating success or failure of data saving command
     */
    @Subscribe
    private void handleDataSavingExceptionEvent(DataSavingExceptionEvent dsee) {
        if (dsee.exception == null) {
            writeToChat(MESSAGE_SUCCESS);
        } else {
            writeToChat(MESSAGE_FAILURE + ": " + dsee.toString());
        }
        unregisterAsAnEventHandler(this);
    }

    /**
     * @return the filepath
     */
    public String getFilepath() {
        return filepath;
    }

    /**
     * @param filepath the filepath to set
     */
    public void setFilepath(String filepath) {
        this.filepath = filepath;
    }

```
###### /java/seedu/task/logic/Logic.java
``` java
    /** Returns the list of chat messages */
    ChatList getChatList();
```
###### /java/seedu/task/logic/LogicManager.java
``` java

    @Override
    public ObservableList<ReadOnlyTask> getFilteredTaskList() {
        return model.getFilteredTaskList();
    }

    @Override
    public ChatList getChatList() {
        // TODO Auto-generated method stub
        return model.getChatList();
    }
```
###### /java/seedu/task/logic/parser/SaveToCommandParser.java
``` java

public class SaveToCommandParser extends AbstractParser {
    /**
     * Parses the given {@code String} of arguments in the context of the SaveToCommand
     * and returns an SaveToCommand object for execution.
     */
    @Override
    public Command parse(String args) {
        return new SaveToCommand(args);
    }

```
###### /java/seedu/task/model/Model.java
``` java
    /** Returns the chat list as an {@code FilteredList<Chat>} */
    ChatList getChatList();
```
###### /java/seedu/task/model/Model.java
``` java
    void changeSaveToLocation(ReadOnlyTaskManager taskManager, String filepath);

    void changeLoadFromLocation(String filepath);
```
###### /java/seedu/task/model/ModelManager.java
``` java
    private final ChatList chatList;
    private final String MESSAGE_RESET_DATA_SUCCESS = "Data has been successfully loaded!";
    private final String MESSAGE_RESET_DATA_FAIL = "No such file exists!";

```
###### /java/seedu/task/model/ModelManager.java
``` java
        chatList = this.taskManager.getChatList();
```
###### /java/seedu/task/model/ModelManager.java
``` java
    @Override
    public ChatList getChatList() {
        return chatList;
    }
```
###### /java/seedu/task/model/ModelManager.java
``` java
    @Override
    public void changeSaveToLocation(ReadOnlyTaskManager taskManager, String filepath) {
        triggerSaveToRequest(taskManager, filepath);
    }
    /** Raises an event to request change in save to location */
    protected void triggerSaveToRequest(ReadOnlyTaskManager taskManager, String filepath) {
        raise(new SaveToRequestEvent(taskManager, filepath));
    }

    @Override
    public void changeLoadFromLocation(String filepath) {
        triggerLoadFromRequest(filepath);
    }

    private void triggerLoadFromRequest(String filepath) {
        LoadFromRequestEvent event = new LoadFromRequestEvent(filepath);
        raise(event);
        this.resetData(event.getTaskManager());
    }


```
###### /java/seedu/task/model/ReadOnlyTaskManager.java
``` java
    /**
     * Returns task list as an array
     * */
    Task[] getTaskArray();

```
###### /java/seedu/task/model/task/EndTime.java
``` java
    @Override
    public String toString() {
        if (this.value == null) {
            return "";
        }
        DateFormat formatter = DateFormat.getDateTimeInstance(DateFormat.MEDIUM, DateFormat.SHORT);
        return formatter.format(this.value);
    }
```
###### /java/seedu/task/model/task/StartTime.java
``` java
    @Override
    public String toString() {
        if (this.value == null) {
            return "";
        }
        DateFormat formatter = DateFormat.getDateTimeInstance(DateFormat.MEDIUM, DateFormat.SHORT);
        return formatter.format(this.value);
    }
```
###### /java/seedu/task/model/task/UniqueTaskList.java
``` java
    public Task[] asArray() {
        Task[] tasks = new Task[internalList.size()];
        for (int i = 0; i < internalList.size(); i++) {
            tasks[i] = internalList.get(i);
        }
        return tasks;
    }
```
###### /java/seedu/task/model/TaskManager.java
``` java
    private final ChatList chats;
```
###### /java/seedu/task/model/TaskManager.java
``` java
        chats = new ChatList();
```
###### /java/seedu/task/model/TaskManager.java
``` java
    @Override
    public Task[] getTaskArray() {
        return tasks.asArray();
    }
```
###### /java/seedu/task/model/TaskManager.java
``` java
    public ChatList getChatList() {
        return chats;
    }
```
###### /java/seedu/task/model/util/SampleDataUtil.java
``` java
public class SampleDataUtil {

    private static final String SAMPLE_DATA_FILE_PATH = "./sample/taskmanager.xml";

    public static Task[] getSampleTasks() throws DataConversionException, IOException {
        ReadOnlyTaskManager sampleTaskManager = getSampleTaskManager();
        Task[] tasks = sampleTaskManager.getTaskArray();
        return tasks;
    }

    public static ReadOnlyTaskManager getSampleTaskManager() throws DataConversionException, IOException {
        // TODO: Make this read from resource
        XmlTaskManagerStorage sampleStorage = new XmlTaskManagerStorage(SAMPLE_DATA_FILE_PATH);
        ReadOnlyTaskManager taskManager = sampleStorage.getReadOnlyTaskManager(SAMPLE_DATA_FILE_PATH);

        return taskManager;
    }
}
```
###### /java/seedu/task/storage/StorageManager.java
``` java
    @Override
    public void changeSaveToLocation(ReadOnlyTaskManager taskManager, String filePath) {
        try {
            taskManagerStorage.changeSaveToLocation(taskManager, filePath);
            raise(new DataSavingExceptionEvent(""));
        } catch (IOException e) {
            raise(new DataSavingExceptionEvent(e));
        }
    }

    @Override
    @Subscribe
    public void handleSaveToRequestEvent(SaveToRequestEvent event) {
        logger.info(LogsCenter.getEventHandlingLogMessage(event, "Changing save to location to " + event.filepath));
        changeSaveToLocation(event.taskManager, event.filepath);
    }

    @Override
    @Subscribe
    public void handleLoadFromRequestEvent(LoadFromRequestEvent event) throws IOException, DataConversionException {
        logger.info(LogsCenter.getEventHandlingLogMessage(event, "Changing load from location to " + event.filepath));
        changeLoadFromLocation(event);
    }

    private void changeLoadFromLocation(LoadFromRequestEvent event) {
        try {
            event.taskManager = readTaskManager(event.filepath);
            raise(new DataLoadingExceptionEvent(""));
        } catch (DataConversionException | IOException | NoSuchElementException e) {
            raise(new DataLoadingExceptionEvent(e));
        }
    }

```
###### /java/seedu/task/storage/XmlSerializableTaskManager.java
``` java

/**
 * An Immutable TaskManager that is serializable to XML format
 */
@XmlRootElement(name = "taskmanager")
public class XmlSerializableTaskManager implements ReadOnlyTaskManager {

    @XmlElement
    private List<XmlAdaptedTask> task;
    @XmlElement
    private List<XmlAdaptedTag> tags;

    /**
     * Creates an empty XmlSerializableTaskManager.
     * This empty constructor is required for marshalling.
     */
    public XmlSerializableTaskManager() {
        task = new ArrayList<>();
        tags = new ArrayList<>();
    }

    /**
     * Conversion
     */
    public XmlSerializableTaskManager(ReadOnlyTaskManager src) {
        this();
        task.addAll(src.getTaskList().stream().map(XmlAdaptedTask::new).collect(Collectors.toList()));
        tags.addAll(src.getTagList().stream().map(XmlAdaptedTag::new).collect(Collectors.toList()));
    }

    @Override
    public ObservableList<ReadOnlyTask> getTaskList() {
        final ObservableList<Task> tasks = this.task.stream().map(p -> {
            try {
                return p.toModelType();
            } catch (IllegalValueException e) {
                e.printStackTrace();
                //TODO: better error handling
                return null;
            }
        }).collect(Collectors.toCollection(FXCollections::observableArrayList));
        return new UnmodifiableObservableList<>(tasks);
    }

    @Override
    public ObservableList<Tag> getTagList() {
        final ObservableList<Tag> tags = this.tags.stream().map(t -> {
            try {
                return t.toModelType();
            } catch (IllegalValueException e) {
                e.printStackTrace();
                //TODO: better error handling
                return null;
            }
        }).collect(Collectors.toCollection(FXCollections::observableArrayList));
        return new UnmodifiableObservableList<>(tags);
    }

    @Override
    public Task[] getTaskArray() {
        ObservableList<ReadOnlyTask> tasks = getTaskList();
        Task[] taskArray = new Task[getTaskList().size()];
        for (int i = 0; i < tasks.size(); i++) {
            taskArray[i] = (Task) tasks.get(i);
        }
        return taskArray;

    }
}
```
###### /java/seedu/task/storage/XmlTaskManagerStorage.java
``` java

    /**
     * @param filePath the filePath to set
     */
    private void setFilePath(String filePath) {
        this.filePath = filePath;
    }

    /**
     * Changes the save location and performs a save operation
     * @throws IOException
     */
    @Override
    public void changeSaveToLocation(ReadOnlyTaskManager taskManager, String filepath) throws IOException {
        setFilePath(filepath);
        this.saveTaskManager(taskManager, filepath);
    }
```
###### /java/seedu/task/storage/XmlTaskManagerStorage.java
``` java
    /**
     * Gets the ReadOnlyTaskManager object from the target file
     * @param filePath location of the data. Cannot be null
     * @throws DataConversionException if the file is not in the correct format.
     */
    public ReadOnlyTaskManager getReadOnlyTaskManager(String filePath) throws DataConversionException,
                                                                                 FileNotFoundException {
        assert filePath != null;

        File taskManagerFile = new File(filePath);

        if (!taskManagerFile.exists()) {
            logger.info("TaskManager file "  + taskManagerFile + " not found");
            return null;
        }

        ReadOnlyTaskManager taskManager = XmlFileStorage.loadDataFromSaveFile(new File(filePath));

        return taskManager;
    }
```
###### /java/seedu/task/ui/chat/ChatMessage.java
``` java
import javafx.fxml.FXML;
import javafx.scene.control.Label;
import javafx.scene.layout.Region;
import javafx.scene.layout.StackPane;
import seedu.task.model.chat.Chat;
import seedu.task.ui.UiPart;

public class ChatMessage extends UiPart<Region> {
    @FXML
    private StackPane chatMessagePane;
    @FXML
    protected Label message;

    public ChatMessage(String fxml, Chat chat) {
        super(fxml);
        message.setText(chat.getMessage());
    }

}
```
###### /java/seedu/task/ui/chat/ChatMessage.java
``` java

```
###### /java/seedu/task/ui/chat/SuruChatMessage.java
``` java
import seedu.task.model.chat.Chat;

public class SuruChatMessage extends ChatMessage {
    protected static final String FXML = "SuruChatMessage.fxml";

    public SuruChatMessage(Chat chat) {
        super(FXML, chat);
    }

}
```
###### /java/seedu/task/ui/chat/UserChatMessage.java
``` java
import seedu.task.model.chat.Chat;

public class UserChatMessage extends ChatMessage {
    protected static final String FXML = "UserChatMessage.fxml";

    public UserChatMessage(Chat chat) {
        super(FXML, chat);
    }
}
//@author
```
###### /java/seedu/task/ui/ChatPanel.java
``` java
import java.util.logging.Logger;

import com.google.common.eventbus.Subscribe;

import javafx.beans.property.SimpleStringProperty;
import javafx.beans.property.StringProperty;
import javafx.fxml.FXML;
import javafx.scene.control.ListCell;
import javafx.scene.control.ListView;
import javafx.scene.layout.AnchorPane;
import javafx.scene.layout.Region;
import javafx.scene.text.Text;
import seedu.task.commons.core.LogsCenter;
import seedu.task.commons.events.ui.NewResultAvailableEvent;
import seedu.task.commons.util.FxViewUtil;
import seedu.task.model.Sender;
import seedu.task.model.chat.Chat;
import seedu.task.model.chat.ChatList;
import seedu.task.ui.chat.SuruChatMessage;
import seedu.task.ui.chat.UserChatMessage;

/**
 * A ui for the status bar that is displayed at the header of the application.
 */
public class ChatPanel extends UiPart<Region> {

    private static final Logger logger = LogsCenter.getLogger(ChatPanel.class);
    private static final String FXML = "ChatPanel.fxml";
    private final StringProperty displayed = new SimpleStringProperty("");

    private ChatList chatList;

    @FXML
    private AnchorPane placeHolder;

    @FXML
    private AnchorPane mainPane;

    @FXML
    private ListView<Chat> chatListView;

    @FXML
    private Text resultDisplay;

    public ChatPanel(AnchorPane anchorPane, ChatList chatList) {
        super(FXML);
        this.chatList = chatList;
        resultDisplay.textProperty().bind(displayed);
        FxViewUtil.applyAnchorBoundaryParameters(mainPane, 0.0, 0.0, 0.0, 0.0);
        FxViewUtil.applyAnchorBoundaryParameters(placeHolder, 0.0, 0.0, 0.0, 0.0);
        FxViewUtil.applyAnchorBoundaryParameters(resultDisplay, 0.0, 0.0, 0.0, 0.0);
        setConnections(chatList);
        anchorPane.getChildren().add(mainPane);
        registerAsAnEventHandler(this);

    }

    private void setConnections(ChatList chatList) {
        chatListView.setItems(chatList.asObservableList());
        chatListView.setCellFactory(listView -> new ChatListViewCell());
    }

    @Subscribe
    private void handleNewResultAvailableEvent(NewResultAvailableEvent event) {
        logger.info(LogsCenter.getEventHandlingLogMessage(event));
        displayed.setValue(event.message);
        chatList.add(new Chat(event.message, Sender.SURU));
        chatListView.scrollTo(chatList.size() - 1);
    }


    class ChatListViewCell extends ListCell<Chat> {

        @Override
        protected void updateItem(Chat chat, boolean empty) {
            super.updateItem(chat, empty);
            if (empty || chat == null) {
                setGraphic(null);
                setText(null);
            } else {
                switch(chat.getSender()) {
                case SURU:
                    setGraphic(new SuruChatMessage(chat).getRoot());
                    break;
                case USER:
                    setGraphic(new UserChatMessage(chat).getRoot());
                    break;
                }
            }
        }
    }
}
```
###### /java/seedu/task/ui/CommandBox.java
``` java
import java.util.logging.Logger;

import javafx.fxml.FXML;
import javafx.scene.control.SplitPane;
import javafx.scene.control.TextField;
import javafx.scene.layout.AnchorPane;
import javafx.scene.layout.Region;
import seedu.task.commons.core.LogsCenter;
import seedu.task.commons.events.model.UpdateTasksEvent;
import seedu.task.commons.events.ui.NewResultAvailableEvent;
import seedu.task.commons.util.FxViewUtil;
import seedu.task.logic.Logic;
import seedu.task.logic.commands.CommandResult;
import seedu.task.logic.commands.exceptions.CommandException;

public class CommandBox extends UiPart<Region> {
    private final Logger logger = LogsCenter.getLogger(CommandBox.class);
    private static final String FXML = "CommandBox.fxml";
    public static final String ERROR_STYLE_CLASS = "error";
    private final Logic logic;

    @FXML
    private TextField commandTextField;

    public CommandBox(AnchorPane commandBoxPlaceholder, Logic logic) {
        super(FXML);
        this.logic = logic;
        addToPlaceholder(commandBoxPlaceholder);
    }

    private void addToPlaceholder(AnchorPane placeHolderPane) {
        SplitPane.setResizableWithParent(placeHolderPane, false);
        placeHolderPane.getChildren().add(commandTextField);
        FxViewUtil.applyAnchorBoundaryParameters(getRoot(), 0.0, 0.0, 0.0, 0.0);
        FxViewUtil.applyAnchorBoundaryParameters(commandTextField, 0.0, 0.0, 0.0, 0.0);
    }

    @FXML
    private void handleCommandInputChanged() {
        try {
            CommandResult commandResult = logic.execute(commandTextField.getText());
            // process result of the command
            setStyleToIndicateCommandSuccess();
            commandTextField.setText("");
            if (commandResult != null) {
                logger.info("Result: " + commandResult.feedbackToUser);
                raise(new UpdateTasksEvent());
                raise(new NewResultAvailableEvent(commandResult.feedbackToUser));
            }
        } catch (CommandException e) {
            // handle command failure
            setStyleToIndicateCommandFailure();
            commandTextField.setText("");
            logger.info("Invalid command: " + commandTextField.getText());
            raise(new NewResultAvailableEvent(e.getMessage()));
        }
    }

    /**
     * Sets the command box style to indicate a successful command.
     */
    private void setStyleToIndicateCommandSuccess() {
        commandTextField.getStyleClass().remove(ERROR_STYLE_CLASS);
    }

    /**
     * Sets the command box style to indicate a failed command.
     */
    private void setStyleToIndicateCommandFailure() {
        commandTextField.getStyleClass().add(ERROR_STYLE_CLASS);
    }

}
```
###### /java/seedu/task/ui/HelpWindow.java
``` java
    private static final String USERGUIDE_URL =
            "https://cs2103jan2017-w09-b3.github.io/main/UserGuide.html";
```
###### /java/seedu/task/ui/MainWindow.java
``` java
    @FXML
    private AnchorPane taskListPanelPlaceholder;

    @FXML
    private AnchorPane chatPanelPlaceholder;
```
###### /java/seedu/task/ui/StatusBarFooter.java
``` java

/**
 * A ui for the status bar that is displayed at the footer of the application.
 */
public class StatusBarFooter extends UiPart<Region> {
    private static final Logger logger = LogsCenter.getLogger(StatusBarFooter.class);

    @FXML
    private StatusBar progressStatus;
    @FXML
    private StatusBar saveLocationStatus;

    private static final String FXML = "StatusBarFooter.fxml";
    private final String SAVING_MESSAGE = "Saving to: ./";

    public StatusBarFooter(AnchorPane placeHolder, String saveLocation, ObservableList<ReadOnlyTask> observableList) {
        super(FXML);
        addToPlaceholder(placeHolder);
        updateProgressStatus(observableList);
        updateBackgroundColor(observableList);
        setSaveLocation(SAVING_MESSAGE + saveLocation);
        registerAsAnEventHandler(this);
    }

    private void addToPlaceholder(AnchorPane placeHolder) {
        FxViewUtil.applyAnchorBoundaryParameters(getRoot(), 0.0, 0.0, 0.0, 0.0);
        placeHolder.getChildren().add(getRoot());
    }

    private void setSaveLocation(String location) {
        this.saveLocationStatus.setText(location);
    }

    private void updateProgressStatus(ObservableList<ReadOnlyTask> observableList) {
        String progress = null;
        int totalTasks = getTotalTasks(observableList);
        int completedTasks = getTotalCompletedTasks(observableList);

        progress = completedTasks + "/" + totalTasks + " tasks completed.";
        this.progressStatus.setText(progress);
    }

    public int getTotalTasks(ObservableList<ReadOnlyTask> observableList) {
        return observableList.size();
    }

    private void updateBackgroundColor(ObservableList<ReadOnlyTask> observableList) {
        double totalTasks = getTotalTasks(observableList);
        double completedTasks = getTotalCompletedTasks(observableList);
        double progress = 0;
        if (totalTasks > 0) {
            progress = completedTasks / totalTasks;
        }
        if (progress > 0.5) {
            progressStatus.setStyle("-fx-background-color: #CFF48D;"); //green
            saveLocationStatus.setStyle("-fx-background-color: #CFF48D;");
        } else {
            progressStatus.setStyle("-fx-background-color: #f4a68c;"); //pink
            saveLocationStatus.setStyle("-fx-background-color: #f4a68c;");
        }
    }

    public int getTotalCompletedTasks(ObservableList<ReadOnlyTask> observableList) {
        int result = 0;
        ObservableList<ReadOnlyTask> tasks = observableList;
        for (ReadOnlyTask t : tasks) {
            if (t.getCompletionStatus().getCompletion()) {
                result++;
            }
        }
        return result;
    }

    @Subscribe
    public void handleTaskManagerChangedEvent(TaskManagerChangedEvent abce) {
        updateProgressStatus(abce.data.getTaskList());
        updateBackgroundColor(abce.data.getTaskList());
    }

    @Subscribe
    public void handleSaveToRequestEvent(SaveToRequestEvent event) {
        setSaveLocation(SAVING_MESSAGE + event.filepath);
    }

}
```
###### /java/seedu/task/ui/TaskCard.java
``` java
import javafx.fxml.FXML;
import javafx.scene.control.Label;
import javafx.scene.image.ImageView;
import javafx.scene.layout.FlowPane;
import javafx.scene.layout.HBox;
import javafx.scene.layout.Region;
import javafx.scene.paint.Color;
import javafx.scene.text.Text;
import seedu.task.model.task.ReadOnlyTask;

public class TaskCard extends UiPart<Region> {

    private static final String FXML = "TaskListCard.fxml";

    @FXML
    private HBox cardPane;
    @FXML
    private Label name;
    @FXML
    private Label id;
    @FXML
    private Label startTime;
    @FXML
    private Label endTime;
    @FXML
    private FlowPane tags;
    @FXML
    private ImageView imgChecked;
    @FXML
    private ImageView imgUnchecked;
    @FXML
    private Text taskTypeText;

    public TaskCard(ReadOnlyTask task, int displayedIndex) {
        super(FXML);
        name.setText(task.getName().fullName);
        id.setText(displayedIndex + ". ");
        startTime.setText(task.writeStartTime());
        endTime.setText(task.writeEndTime());
        String completionStatus = task.getCompletionStatus().toString().toUpperCase();
        taskTypeText.setText(completionStatus);
        setTaskTypeTextColor(completionStatus);
        setCheckboxStatus(task.getCompletionStatus().getCompletion());
        initTags(task);
    }

    private void initTags(ReadOnlyTask task) {
        task.getTags().forEach(tag -> tags.getChildren().add(new Label(ReadOnlyTask.TAG_PREFIX + tag.tagName)));
    }

    private void setCheckboxStatus(boolean completionStatus) {
        if (completionStatus) {
            showChecked();
        } else {
            showUnchecked();
        }
    }

    private void showUnchecked() {
        imgChecked.setVisible(false);
        imgUnchecked.setVisible(true);
    }

    private void showChecked() {
        imgChecked.setVisible(true);
        imgUnchecked.setVisible(false);
    }

    /**
     * Sets the color of the task type label.
     * @param type
     */
    private void setTaskTypeTextColor(String type) {
        switch(type) {
        case "OVERDUE":
            taskTypeText.setFill(Color.DARKRED);
            break;
        case "UPCOMING":
            taskTypeText.setFill(Color.ORANGE);
            break;
        default:
            taskTypeText.setFill(Color.TRANSPARENT);
            break;
        }
    }

}
```
###### /resources/view/ChatPanel.fxml
``` fxml

<?import java.net.URL?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Text?>

```
###### /resources/view/CommandBox.fxml
``` fxml

<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.VBox?>

```
###### /resources/view/HelpWindow.fxml
``` fxml

<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.web.WebView?>
<AnchorPane fx:id="helpWindowRoot" stylesheets="@suru.css" xmlns="http://javafx.com/javafx/8" xmlns:fx="http://javafx.com/fxml/1">
    <WebView fx:id="browser"/>
</AnchorPane>
```
###### /resources/view/MainWindow.fxml
``` fxml
<?import java.net.URL?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Menu?>
<?import javafx.scene.control.MenuBar?>
<?import javafx.scene.control.MenuItem?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.SplitPane?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<VBox xmlns="http://javafx.com/javafx/8.0.121" xmlns:fx="http://javafx.com/fxml/1">
   <stylesheets>
      <URL value="@suru.css" />
      <URL value="@Extensions.css" />
   </stylesheets>
   <children>
      <MenuBar VBox.vgrow="NEVER">
         <menus>
            <Menu mnemonicParsing="false" text="File">
               <items>
                  <MenuItem mnemonicParsing="false" onAction="#handleExit" text="Exit" />
               </items>
            </Menu>
            <Menu mnemonicParsing="false" text="Help">
               <items>
                  <MenuItem fx:id="helpMenuItem" mnemonicParsing="false" onAction="#handleHelp" text="Help" />
               </items>
            </Menu>
         </menus>
      </MenuBar>
      <SplitPane id="splitPane" fx:id="splitPane" dividerPositions="0.4" VBox.vgrow="ALWAYS">
         <items>
            <VBox fx:id="taskList" minWidth="340" prefWidth="340">
                <padding>
                    <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                </padding>
               <children>
                  <AnchorPane fx:id="taskListPanelPlaceholder" VBox.vgrow="ALWAYS" />
                  <AnchorPane fx:id="statusbarPlaceholder" />
               </children>
            </VBox>
            <VBox maxWidth="-Infinity" minWidth="-Infinity" prefWidth="450.0" SplitPane.resizableWithParent="false">
               <children>
                  <StackPane>
                     <children>
                        <Label id="title" text="Suru" textAlignment="CENTER" />
                     </children>
                  </StackPane>
                  <Separator prefWidth="200.0" stylesheets="@suru.css" />
                   <AnchorPane fx:id="chatPanelPlaceholder" styleClass="anchor-pane-with-border" stylesheets="@suru.css" VBox.vgrow="ALWAYS">
                       <padding>
                           <Insets bottom="5.0" left="10.0" right="10.0" top="5.0" />
                       </padding>
                   </AnchorPane>
                  <AnchorPane fx:id="commandBoxPlaceholder" maxHeight="80.0" styleClass="anchor-pane-with-border" VBox.vgrow="NEVER">
                     <padding>
                        <Insets bottom="5.0" left="10.0" right="10.0" top="5.0" />
                     </padding>
                  </AnchorPane>
               </children>
            </VBox>
         </items>
      </SplitPane>
   </children>
</VBox>
```
###### /resources/view/suru.css
``` css
#title{
    -fx-font-size: 16pt;
}

#taskTypeText{
    -fx-font-size: 8pt;
    -fx-font-family: "Segoe UI Semibold";
    -fx-opacity: 0.5;
}

.background {
    -fx-background-color: derive(#f6f6f6, 20%);
}

.label {
    -fx-font-size: 11pt;
    -fx-font-family: "Segoe UI Semibold";
    -fx-text-fill: #555555;
    -fx-opacity: 0.9;
}

.label-bright {
    -fx-font-size: 11pt;
    -fx-font-family: "Segoe UI Semibold";
    -fx-text-fill: #1d1d1d;
    -fx-opacity: 1;
}

.label-header {
    -fx-font-size: 32pt;
    -fx-font-family: "Segoe UI Light";
    -fx-text-fill: #1d1d1d;
    -fx-opacity: 1;
}

.text-field {
    -fx-font-size: 12pt;
    -fx-font-family: "Segoe UI Semibold";
}

.tab-pane {
    -fx-padding: 0 0 0 1;
}

.tab-pane .tab-header-area {
    -fx-padding: 0 0 0 0;
    -fx-min-height: 0;
    -fx-max-height: 0;
}

.table-view {
    -fx-base: #f6f6f6;
    -fx-control-inner-background: #f6f6f6;
    -fx-background-color: #f6f6f6;
    -fx-table-cell-border-color: transparent;
    -fx-table-header-border-color: transparent;
    -fx-padding: 5;
}

.table-view .column-header-background {
    -fx-background-color: transparent;
}

.table-view .column-header, .table-view .filler {
    -fx-size: 35;
    -fx-border-width: 0 0 1 0;
    -fx-background-color: transparent;
    -fx-border-color:
        transparent
        transparent
        derive(-fx-base, 80%)
        transparent;
    -fx-border-insets: 0 10 1 0;
}

.table-view .column-header .label {
    -fx-font-size: 20pt;
    -fx-font-family: "Segoe UI Light";
    -fx-text-fill: #1d1d1d;
    -fx-alignment: center-left;
    -fx-opacity: 1;
}

.table-view:focused .table-row-cell:filled:focused:selected {
    -fx-background-color: -fx-focus-color;
}

.split-pane:horizontal .split-pane-divider {
    -fx-border-color: transparent #f6f6f6 transparent #f6f6f6;
    -fx-background-color: transparent, derive(#f6f6f6, 10%);
}

.split-pane {
    -fx-border-radius: 1;
    -fx-border-width: 1;
    -fx-background-color: derive(#f6f6f6, 20%);
}

.list-cell {
    -fx-label-padding: 0 0 0 0;
    -fx-graphic-text-gap : 0;
    -fx-padding: 0 0 0 0;
}

.list-cell .label {
    -fx-text-fill: #010504;
}

.cell_big_label {
    -fx-font-size: 16px;
    -fx-text-fill: #010504;
}

.cell_small_label {
    -fx-font-size: 11px;
    -fx-text-fill: #010504;
}

.anchor-pane {
     -fx-background-color: derive(#f6f6f6, 20%);
}

.anchor-pane-with-border {
     -fx-background-color: derive(#f6f6f6, 20%);
     -fx-border-color: derive(#f6f6f6, 10%);
     -fx-border-top-width: 1px;
}

.status-bar {
    -fx-background-color: derive(#f6f6f6, 20%);
    -fx-text-fill: black;
}

.chat-display {
    -fx-background-color: #ffffff;
    -fx-height: 100%;
}

.chat-display .label {
    -fx-text-fill: black !important;
}

.status-bar .label {
    -fx-text-fill: #1d1d1d;
}

.status-bar-with-border {
    -fx-background-color: derive(#f6f6f6, 30%);
    -fx-border-color: derive(#f6f6f6, 25%);
    -fx-border-width: 1px;
}

.status-bar-with-border .label {
    -fx-text-fill: #1d1d1d;
}

.grid-pane {
    -fx-background-color: derive(#f6f6f6, 30%);
    -fx-border-color: derive(#f6f6f6, 30%);
    -fx-border-width: 1px;
}

.grid-pane .anchor-pane {
    -fx-background-color: derive(#f6f6f6, 30%);
}

.context-menu {
    -fx-background-color: derive(#f6f6f6, 50%);
}

.context-menu .label {
    -fx-text-fill: #1d1d1d;
}

.menu-bar {
    -fx-background-color: derive(#f6f6f6, 20%);
}

.menu-bar .label {
    -fx-font-size: 14pt;
    -fx-font-family: "Segoe UI Light";
    -fx-text-fill: #1d1d1d;
    -fx-opacity: 0.9;
}

.menu .left-container {
    -fx-background-color: black;
}

/*
 * Metro style Push Button
 * Author: Pedro Duque Vieira
 * http://pixelduke.wordpress.com/2012/10/23/jmetro-windows-8-controls-on-java/
 */
.button {
    -fx-padding: 5 22 5 22;
    -fx-border-color: #e2e2e2;
    -fx-border-width: 2;
    -fx-background-radius: 0;
    -fx-background-color: #f6f6f6;
    -fx-font-family: "Segoe UI", Helvetica, Arial, sans-serif;
    -fx-font-size: 11pt;
    -fx-text-fill: #d8d8d8;
    -fx-background-insets: 0 0 0 0, 0, 1, 2;
}

.button:hover {
    -fx-background-color: #3a3a3a;
}

.button:pressed, .button:default:hover:pressed {
  -fx-background-color: #1d1d1d;
  -fx-text-fill: #f6f6f6;
}

.button:focused {
    -fx-border-color: #1d1d1d, #1d1d1d;
    -fx-border-width: 1, 1;
    -fx-border-style: solid, segments(1, 1);
    -fx-border-radius: 0, 0;
    -fx-border-insets: 1 1 1 1, 0;
}

.button:disabled, .button:default:disabled {
    -fx-opacity: 0.4;
    -fx-background-color: #f6f6f6;
    -fx-text-fill: #1d1d1d;
}

.button:default {
    -fx-background-color: -fx-focus-color;
    -fx-text-fill: #ffffff;
}

.button:default:hover {
    -fx-background-color: derive(-fx-focus-color, 30%);
}

.dialog-pane {
    -fx-background-color: #f6f6f6;
}

.dialog-pane > *.button-bar > *.container {
    -fx-background-color: #f6f6f6;
}

.dialog-pane > *.label.content {
    -fx-font-size: 14px;
    -fx-font-weight: bold;
    -fx-text-fill: #1d1d1d;
}

.dialog-pane:header *.header-panel {
    -fx-background-color: derive(#f6f6f6, 25%);
}

.dialog-pane:header *.header-panel *.label {
    -fx-font-size: 18px;
    -fx-font-style: italic;
    -fx-fill: #1d1d1d;
    -fx-text-fill: #1d1d1d;
}

.scroll-bar .thumb {
    -fx-background-color: derive(#f6f6f6, 50%);
    -fx-background-insets: 3;
}

.scroll-bar .increment-button, .scroll-bar .decrement-button {
    -fx-background-color: transparent;
    -fx-padding: 0 0 0 0;
}

.scroll-bar .increment-arrow, .scroll-bar .decrement-arrow {
    -fx-shape: " ";
}

.scroll-bar:vertical .increment-arrow, .scroll-bar:vertical .decrement-arrow {
    -fx-padding: 1 8 1 8;
}

.scroll-bar:horizontal .increment-arrow, .scroll-bar:horizontal .decrement-arrow {
    -fx-padding: 8 1 8 1;
}

#cardPane {
    -fx-background-color: transparent;
    -fx-border-color: #d6d6d6;
    -fx-border-width: 1 1 1 1;
}

#commandTypeLabel {
    -fx-font-size: 11px;
    -fx-text-fill: #F70D1A;
}

#filterField, #personListPanel, #personWebpage {
    -fx-effect: innershadow(gaussian, black, 10, 0, 0, 0);
}

#tags {
    -fx-hgap: 7;
    -fx-vgap: 3;
}

#tags .label {
    -fx-text-fill: black;
    -fx-background-color: #CFF48D;
    -fx-border-color: #c6c6c6;
    -fx-padding: 1 3 1 3;
    -fx-border-radius: 2;
    -fx-background-radius: 2;
    -fx-font-size: 11;
}
```
###### /resources/view/SuruChatMessage.fxml
``` fxml

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.VBox?>

<AnchorPane xmlns="http://javafx.com/javafx/8.0.121" xmlns:fx="http://javafx.com/fxml/1">
   <children>
      <VBox layoutX="10.0" layoutY="10.0" maxWidth="-Infinity" prefWidth="350.0" AnchorPane.bottomAnchor="10.0" AnchorPane.leftAnchor="10.0" AnchorPane.topAnchor="10.0">
         <children>
            <Label fx:id="message" style="-fx-background-color: #56adff;" text="\$messageLabel" textFill="WHITE" wrapText="true">
               <padding>
                  <Insets bottom="16.0" left="8.0" right="8.0" top="16.0" />
               </padding>
               <opaqueInsets>
                  <Insets />
               </opaqueInsets>
            </Label>
         </children>
         <opaqueInsets>
            <Insets />
         </opaqueInsets>
      </VBox>
   </children>
</AnchorPane>
```
###### /resources/view/TaskListCard.fxml
``` fxml

<?import java.net.URL?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Text?>

```
###### /resources/view/TaskListPanel.fxml
``` fxml
<?import javafx.scene.control.ListView?>
<?import javafx.scene.layout.*?>
<?import java.net.URL?>
<VBox xmlns="http://javafx.com/javafx/8" xmlns:fx="http://javafx.com/fxml/1">
    <stylesheets>
        <URL value="@suru.css" />
        <URL value="@Extensions.css" />
    </stylesheets>
    <children>
        <ListView fx:id="taskListView" VBox.vgrow="ALWAYS" />
    </children>
</VBox>
```
###### /resources/view/UserChatMessage.fxml
``` fxml

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.VBox?>

<AnchorPane xmlns="http://javafx.com/javafx/8.0.121" xmlns:fx="http://javafx.com/fxml/1">
   <children>
      <VBox layoutY="10.0" maxWidth="350.0" style="-fx-background-color: CFF48D;" AnchorPane.bottomAnchor="10.0" AnchorPane.rightAnchor="10.0" AnchorPane.topAnchor="10.0">
         <children>
            <Label fx:id="message" alignment="CENTER_RIGHT" stylesheets="@suru.css" text="\$messageLabel" textFill="WHITE" wrapText="true">
               <padding>
                  <Insets bottom="16.0" left="8.0" right="8.0" top="16.0" />
               </padding>
            </Label>
         </children>
      </VBox>
   </children>
</AnchorPane>
```
